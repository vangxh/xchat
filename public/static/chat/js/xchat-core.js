function _typeof(t){"@babel/helpers - typeof";var e=_0x2689;return(_typeof=typeof Symbol===e(334)&&"symbol"==typeof Symbol[e(267)]?function(t){return typeof t}:function(t){var n=e;return t&&typeof Symbol===n(334)&&t[n(241)]===Symbol&&t!==Symbol.prototype?n(237):typeof t})(t)}function _0x2689(t,e){return _0x519d[t-=200]}var _0x519d=["[嘻嘻]","title","pop","dataURItoBlob","pushChatLog","toFixed","jsonp","limit","一次最多只能上传5张图片","result","xchat","background","token=","add","avi","getMonth","[生病]","readAsDataURL","[阴险]","close","offsetHeight","Accept","local","getSeconds","661845VYnUtM","click","cloneRange","docx","prototype","faceClick","onStatus","forEach","upload_img_url","[悲伤]",".xchat-pop-foot .cancel","token","wma","jpg","moveStart","[可怜]","[围观]","png","component","[NO]","string","flv","onCancel","mode","xchat-pop-","send","collapse","target","[哈欠]","长时间无响应，连接已关闭","onClose","ppt","onMessage","[草泥马]","pasteHTML","body","62ZOVmbk","outerHTML","[话筒]","createDocumentFragment","left","socketConnect","[鄙视]","Content-type","tipDoc","[爱你]","asf","app","length","xchat-pop","avatar","files","[衰]","zip","addEventListener","clientHeight","onclose","stopPropagation","toLowerCase","toLocaleLowerCase","[晕]","city","TRANSFER","[亲亲]","[熊猫]","confirm",".content","application/json","insertNode","getData","selection","none","object","1364047NyPetG","charCodeAt","[给力]","getHours","zIndex","append","324739JdCobd","kefu","</a>","onConnect","CHAT","[汗]","连接中","file","onreadystatechange","hh:ii:ss","sendLimitTime",".xchat-pop-disable","[右哼哼]","toDateString","&callback=","offsetX","7634zzkNkv",'{"type":"PING"}',"[囧]","512386fMMOdS","iframe","offset","格式不支持","[嘘]","nodeName","[可爱]","type","[心]","[困]","sendMessageFail","[色]","chat","area","wav","[怒]","tipAjax","value","file[]","wmv","setStartAfter","<br/>","appendChild","call","[互粉]","refer","getChatlog","[酷]","[鼓掌]","time","</div>","createElement","onmouseup","getFullYear","[左哼哼]","cache","className","push","jpeg","clipboardData","tipNode","stringify","[浮云]","[钱]","foot","GET",".xchat-pop-foot .confirm","mp3","chatlog","[失望]","getTime","bz2","symbol","isExist","[伤心]","parse","constructor","cursorInsert","getRangeAt","socket","tipIndex","conf","msg","update:modelValue","range","test","1znuxoU","[哈哈]","[思考]","[蛋糕]","width:",";height:","addRange","style",".filter","connect","isEmpty","log","key","[礼物]","ajax","clientY","iterator",'<div class="xchat-pop-body">',"offmsg",'" />',"onConfirm","split","system","substr","success","path","$el","[吃惊]","setAttribute","base64","children","yyyy/mm/dd hh:ii:ss","stopSocket","face","rmvb","401913tjYudd","setRequestHeader","readyState","createRange","modelValue","_fail","service","onerror","tip","[拜拜]","removeAllRanges","[兔子]","onopen","6037SsFjkP","content","init","yyyy-mm-dd hh:ii:ss","replace","connectVisitor","querySelector","open","getDate","classList",'<button class="btn cancel">取消</button>',"[ok]","focus","发送频率过快","src","remove","util","sendMessage","match","[委屈]","innerHTML","mpg","deleteContents","[白眼]","url","preventDefault","[疑问]","data","htm","initService","move","[怒骂]","parentNode","getSelection",'<iframe class="xchat-pop-body" src="',"function","连接出现异常，请刷新重试","onmousemove","POST","clientX",'<button class="btn confirm">确认</button>',"upload_file_url","[神马]","div","rar",".xchat-pop-head .close","[钟]","code","join","getMessage","mid","shift","[馋嘴]","indexOf","[耶]","onload","status","FileReader","[威武]","未建立连接","documentElement","[奥特曼]","[太开心]","[微笑]","shadow","[good]","[睡]","最多允许","text","$emit","slice","txt","faceInsert","name","103KCYqeV","initVisitor","onmousedown","html","auto","[闭嘴]","inherit","doc","visitor","[蜡烛]","removeAttribute","xchat-pop-shadow","[害羞]",'<div class="xchat-pop-head">',"mine","ctrlKey"];!function(t,e){for(var n=_0x2689;[];)try{if(495561===-parseInt(n(492))-parseInt(n(511))+-parseInt(n(299))*parseInt(n(373))+parseInt(n(413))+-parseInt(n(449))*parseInt(n(508))+parseInt(n(286))+parseInt(n(251))*parseInt(n(486)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(_0x519d),function(){var t=_0x2689,e=function(t){var e=_0x2689;this[e(436)]=t==e(292)?"service":e(381),this[e(246)]={},this[e(326)]={app:{id:0},mine:{},to:{},kefu:{},time:0,local:{},tipDoc:null,tipBox:document.body,tipIndex:198725},this[e(208)]={},this[e(244)]=null,this[e(502)]=0};e[t(417)].on=function(e,n){var a=t;return typeof n===a(334)&&(this[a(208)][e]?this[a(208)][e][a(222)](n):this[a(208)][e]=[n]),this},e[t(417)][t(395)]=function(e,n){var a=t,i=this,o="XChat_callback"+(new Date).getTime(),r=document[a(216)]("script");r[a(313)]=e+a(506)+o,document[a(448)][a(207)](r),window[o]=function(t){n[a(208)](i,t)}},e[t(417)][t(220)]=function(e,n,a){var i=t;if(e=i(399)+(this[i(326)][i(460)].id||"")+"_"+this.mode+"_"+e,null===n)return delete localStorage[e];try{o=JSON.parse(localStorage[e])}catch(t){var o={}}if(void 0===n)return o[i(399)];if(typeof n==i(433)){if(a)return void 0===o.key?void 0:o[i(399)][n];o={xchat:n}}else _typeof(n)==i(485)&&void 0!==n.key?void 0!==n[i(202)]?o[i(399)][n[i(263)]]=n[i(202)]:n.remove?delete o[i(399)][n[i(263)]]:o={xchat:n}:o={xchat:n};localStorage[e]=JSON[i(226)](o)},e.prototype[t(316)]=function(e){var n=t;if(this[n(315)][n(261)](this.data.to))return this[n(294)](n(358));var a=(new Date)[n(235)](),i=this[n(502)];if(this.sendLimitTime=a,a-i<1500)return this[n(294)](n(312));if(""!==(e=e[n(303)](/^\s|\s$/g,""))){var o=this,r={type:o[n(326)][n(387)].type,id:o[n(326)][n(387)].id,name:o[n(326)][n(387)][n(372)],avatar:o[n(326)].mine[n(463)],content:e,time:((new Date)[n(235)]()/1e3)[n(394)](0)},c={type:o.data.to.type,id:o[n(326)].to.id,name:r.name,avatar:r[n(463)],content:r[n(300)],time:r[n(214)],mine:!![]},s={type:o[n(326)].to[n(518)],id:o[n(326)].to.id,kefu:o[n(326)].to.kefu||0};o[n(244)][n(438)](n(496),{mine:r,to:s},function(t){var e=n;t&&(c[e(291)]=!![]),o.pushChatLog(c)}),r[n(387)]=!![],o[n(326)][n(214)]=c[n(214)],o[n(208)][n(316)]&&o[n(208)][n(316)][n(420)](function(t){var e=n;t&&t[e(208)](o,r)})}},e.prototype[t(348)]=function(e){var n=t,a=this;e[n(273)]||a[n(393)]({type:e[n(518)],id:e.id,name:e.name,avatar:e.avatar,content:e.content,time:e[n(214)]},!![]),a[n(208)][n(348)]&&a[n(208)][n(348)][n(420)](function(t){var i=n;t&&t[i(208)](a,e)})},e[t(417)][t(393)]=function(e,n){var a,i=t,o=this[i(326)].local,r=e.id;if(this[i(326)][i(387)].kefu)if(o[i(233)]&&o[i(233)][r]){if(o[i(233)][r][i(420)](function(t){var n=i;t[n(214)]===e.time&&t[n(518)]===e[n(518)]&&t[n(300)]===e[n(300)]&&(a=!![])}),a||r==this[i(326)][i(387)].id)return;o[i(233)][r].push(e),o[i(233)][r].length>100&&o[i(233)][r][i(350)]()}else o[i(233)]=o[i(233)]||{},o[i(233)][r]=[e];else if(o.chatlog){if(o.chatlog.forEach(function(t){var n=i;t[n(214)]===e[n(214)]&&t.type===e[n(518)]&&t[n(300)]===e[n(300)]&&(a=!![])}),a||r==this.data[i(387)].id)return;o[i(233)][i(222)](e),o.chatlog[i(461)]>500&&o[i(233)][i(350)]()}else o[i(233)]=[e];n&&isNaN(this[i(326)].mine.id)&&(o[i(214)]=e.time),this.cache(this[i(326)][i(387)].id,o)},e[t(417)][t(211)]=function(e){var n,a=t;return this[a(326)][a(387)][a(493)]?(n=this[a(326)].local.chatlog||{},n=n[e||this[a(326)].to.id||0]||[]):n=this.data[a(411)].chatlog||[],n},e[t(417)][t(329)]=function(e){var n=t,a={},i=this[n(326)][n(457)]||document;e[n(375)]=function(t){var i=n;"a"!=t[i(440)].tagName[i(472)]()&&(a[i(427)]=!![],a[i(513)]=[t[i(338)],t[i(266)],parseFloat(e.parentNode.offsetLeft)||0,parseFloat(e[i(331)].offsetTop)||0,t[i(338)]-t[i(507)],t.clientY-t.offsetY],e.parentNode[i(258)][i(453)]=a[i(513)][2]+"px",e.parentNode[i(258)].top=a.offset[3]+"px")},i.body[n(336)]=function(t){var o=n;if(a[o(427)]){var r,c,s=t.clientX-a[o(513)][0],l=t.clientY-a[o(513)][1];e.parentNode[o(305)](o(503))&&(e[o(331)][o(305)](o(503))[o(258)].display=o(379)),r=i[o(359)].clientWidth-e[o(331)].offsetWidth-a[o(513)][4],c=i[o(359)][o(468)]-e.parentNode[o(409)]-a[o(513)][5],s<0?s<-a[o(513)][4]?s=-a.offset[4]+a.offset[2]:s+=a.offset[2]:s>r?s=r+a[o(513)][2]:s+=a.offset[2],l<0?l<-a.offset[5]?l=-a.offset[5]+a.offset[3]:l+=a[o(513)][3]:l>c?l=c+a[o(513)][3]:l+=a[o(513)][3],e[o(331)].style.left=s+"px",e.parentNode[o(258)].top=l+"px",t[o(324)]()}},i[n(217)]=function(){var t=n;a.moveStart&&(delete a[t(427)],e[t(331)][t(305)](".xchat-pop-disable")&&e[t(331)].querySelector(".xchat-pop-disable")[t(383)](t(258)))}},e[t(417)][t(294)]=function(e,n,a){var i=t;this.pop({type:i(294),content:e},n,a)},e.prototype[t(478)]=function(t,e,n){this.pop({type:"confirm",content:t},e,n)},e[t(417)][t(391)]=function(e,n,a){var i,o=t,r=this,c=document[o(216)](o(342)),s=[];c[o(221)]=o(462),e[o(518)]&&c[o(308)][o(402)](o(437)+e[o(518)]),e[o(518)]==o(294)||s[o(222)](['<div class="xchat-pop-disable"></div>',o(386),"<span>"+(e[o(390)]||"")+"</span>",'<a href="javascript:;" class="close">×</a>',o(215)][o(347)]("")),e[o(518)]==o(512)?(e[o(323)]=this[o(246)][o(276)]+e[o(323)]+(e[o(323)].indexOf("?")>0?"&":"?")+"token="+(this[o(246)][o(424)]||0),s[o(222)](o(333)+e[o(323)]+'" frameborder="0" allowtransparency="true" width="100%"></iframe>')):s[o(222)](o(268)+(void 0===e.content?"":e[o(300)])+o(215)),(e[o(518)]==o(478)||e[o(229)])&&s[o(222)](['<div class="xchat-pop-foot">',o(339),o(309),o(215)].join("")),e[o(524)]&&c[o(279)]("style",o(255)+(e[o(524)][0]||o(377))+o(256)+(e.area[1]||o(377))),c[o(258)][o(490)]=r[o(326)][o(245)],c.innerHTML=s[o(347)](""),typeof n===o(334)&&(a=n,n=null),n||(n=this[o(326)].tipBox),n[o(207)](c),e.type==o(294)?(r[o(225)]=c,setTimeout(function(){var t=o;!r[t(201)]&&(c[t(314)](),r.tipNode=null)},2500)):(e[o(363)]!==![]&&(i=document[o(216)](o(342)),i[o(221)]=o(384),i[o(258)].zIndex=r[o(326)][o(245)]-1,n[o(207)](i),r[o(326)][o(245)]++),(e.type==o(478)||e[o(229)])&&(typeof a==o(334)&&(e.onConfirm=a,a=e.success),c.querySelector(o(231)).onclick=function(){var t=o;e[t(271)]?e[t(271)][t(208)](null,c)!==![]&&c[t(408)]():c[t(408)]()},c[o(305)](o(423)).onclick=function(){var t=o;e[t(435)]&&e[t(435)][t(208)](null,c),c[t(408)]()}),e[o(518)]==o(512)&&(c.querySelector(o(512))[o(354)]=function(){var t=o;this[t(258)][t(400)]=t(484)}),c[o(305)](o(344)).onclick=function(){var t=o;e.onClose&&e[t(443)][t(208)](null,c),c[t(408)]()},this[o(329)](c[o(281)][1],n)),c[o(408)]=function(){var t=o;c.remove(),e[t(363)]===![]||i[t(314)]()},a||(a=e[o(275)]),a&&a[o(208)](null,c),r[o(326)][o(245)]++},e[t(417)][t(454)]=function(e){var n,a=t,i=this,o=null,r=![];(function t(){var a=_0x2689;(o=new WebSocket(e))[a(298)]=function(){var t=a;n=setInterval(function(){var t=_0x2689;!i[t(326)][t(387)][t(493)]&&((new Date)[t(235)]()/1e3).toFixed(0)-i.data[t(214)]>600?i.socket.close(t(442)):o[t(438)](t(509))},55e3),i.call[t(301)]&&i.call[t(301)][t(420)](function(e){var n=t;e&&e[n(208)](i)})},o.onmessage=function(t){var e=a;try{if((t=JSON[e(240)](t[e(326)])).type==e(260))i[e(208)][e(495)]&&i[e(208)].onConnect.forEach(function(n){var a=e;n&&n.call(i,t[a(326)])});else if(t[e(518)]==e(523))i[e(326)][e(387)][e(214)]=t[e(214)],i[e(348)](t.data);else if(t[e(518)]==e(269)){i[e(326)][e(387)].time=t[e(214)];var n=0;for(var o in t[e(326)])t[e(326)][o].id!=n&&(t[e(326)][o][e(272)]=!![],n=t[e(326)][o].id),i[e(348)](t[e(326)][o],![])}else t[e(518)]==e(355)?i[e(208)].onStatus&&i[e(208)][e(419)].forEach(function(n){var a=e;n&&n.call(i,t[a(326)])}):t.type==e(408)?i[e(244)][e(408)](t[e(247)]):i[e(208)][e(445)]&&i[e(208)][e(445)][e(420)](function(e){e&&e.call(i,t)})}catch(t){console[e(262)](t)}},o[a(469)]=function(){t.connect()},o[a(293)]=function(){var t=a;i[t(244)].close(t(335))},t.connect=function(){n&&clearInterval(n),!r&&(setTimeout(function(){var e=_0x2689;3==o[e(288)]?(r=![],t()):r!=e(408)&&(r=![],t[e(260)]())},5e3),r=!![])}})(),i[a(244)]={send:function(t,e,n){var a=10,r=![],c=setInterval(function(){var s=_0x2689;(o&&1==o[s(288)]||--a<=0)&&(clearInterval(c),a>0?o[s(438)](JSON[s(226)]({type:t,data:e})):(i[s(208)][s(521)]&&i[s(208)].sendMessageFail.forEach(function(n){n[s(208)](i,{type:t,data:e})}),r=!![]),n&&n.call(null,r))},500)},close:function(t){var e=a;r=e(408),o.close(),i[e(326)].to={},i[e(208)].onClose&&i[e(208)][e(443)].forEach(function(n){var a=e;n&&n[a(208)](i,t)})}}},e[t(417)][t(283)]=function(e){var n=t;this[n(244)][n(438)]("CLOSE",{id:e})},e[t(417)].transferKefu=function(e,n){var a=t;this[a(244)][a(438)](a(475),{id:e,uid:n.id,name:n[a(372)],avatar:n[a(463)],status:n.status,kefu:0})},e[t(417)].transferVisitor=function(e,n){var a=t;this[a(244)][a(438)]("TRANSFER",{id:e,uid:n,kefu:1})},e[t(417)].notify=function(e,n,a){var i=t,o={id:e,content:n};void 0===a||(o[i(326)]=a),this[i(244)][i(438)]("NOTIFY",o)},e.prototype[t(304)]=function(e){var n=t,a=this,i=a.data.mine;a.on(n(301),function(){var t=n;a[t(244)][t(438)]("initVisitor",{id:a[t(326)][t(411)].id||0,uid:i.id,name:i.name,avatar:i[t(463)],status:i[t(355)],time:i[t(214)],city:i[t(474)],refer:i.refer})}),a[n(454)](e)},e[t(417)].connectService=function(e){var n=t,a=this,i=a[n(326)].mine;a.on(n(301),function(){var t=n;a[t(244)][t(438)]("initService",{id:i.id,status:i[t(355)],time:i[t(214)]})}),a.socketConnect(e)},e[t(417)][t(265)]=function(e,n){var a,i=t,o=this;o[i(225)]&&(o[i(201)]=!![]),e=this[i(246)].path+e+(e[i(352)]("?")>0?"&":"?")+i(401)+(this[i(246)][i(424)]||0),typeof n===i(334)&&(n={type:i(230),success:n}),(a=new XMLHttpRequest)[i(306)](n[i(518)],e,!![]),n[i(518)]==i(337)?![]==n[i(326)]instanceof FormData&&(a[i(287)](i(456),"application/x-www-form-urlencoded"),n[i(326)]=o[i(315)].json2Url(n[i(326)])):n[i(326)]=null,a[i(287)](i(410),i(480)),a[i(500)]=function(){var t=i;if(4==a.readyState&&(200==a.status||304==a[t(355)])){var e=JSON[t(240)](a.responseText);n.success&&n[t(275)][t(208)](null,e),o[t(201)]&&(o[t(225)].remove(),o[t(201)]=![])}},a[i(438)](n[i(326)])},e[t(417)][t(374)]=function(e,n){var a=t,i=this;i[a(294)](a(498)),i[a(265)](e,function(t){var e,o,r=a;t[r(346)]?(t=t[r(326)],i[r(326)][r(460)]=t[r(460)],isNaN(t[r(387)].id)?((e=i[r(220)](r(424)))?t[r(387)].id=e:i[r(220)]("token",t.mine.id),(o=i[r(220)](t[r(387)].id)||{})[r(214)]?t[r(387)][r(214)]=o[r(214)]:(o[r(214)]=t[r(387)][r(214)],i.cache(t[r(387)].id,o))):o=i[r(220)](t[r(387)].id)||{},o.id&&i[r(315)][r(238)](t[r(493)],o.id)!==![]||(o.id=0),t.mine[r(493)]=0,t.mine[r(210)]=i.conf[r(210)],i.conf.name&&(t[r(387)][r(372)]=i[r(246)].name),i[r(246)][r(463)]&&(t[r(387)][r(463)]=i.conf[r(463)]),i[r(326)][r(387)]=t[r(387)],i[r(326)][r(493)]=t.kefu,i.data.local=o,i.data.time=t[r(214)],n(t)):i[r(294)](t[r(247)])})},e[t(417)][t(328)]=function(e,n){var a=t,i=this;i[a(294)]("连接中"),i[a(265)](e,function(t){var e,o=a;t.code?(t=t[o(326)],i.data[o(460)]=t.app,e=i[o(220)](t[o(387)].id)||{},t[o(387)][o(493)]=1,i[o(326)][o(214)]=t[o(214)],i[o(246)][o(372)]&&(t.mine.name=i.conf[o(372)]),i[o(246)][o(463)]&&(t[o(387)][o(463)]=i[o(246)][o(463)]),i[o(326)].mine=t[o(387)],i[o(326)].kefu=t.kefu,i[o(326)].local=e,n(t)):i.tip(t[o(247)])})},e[t(417)][t(315)]={timeFormat:function(e,n){var a,i=t,e=1e3*e,o=new Date(e);a={"yyyy|yy":o[i(218)](),"mm?":o[i(404)]()+1,"dd?":o[i(307)](),"hh?":o[i(489)](),"ii?":o.getMinutes(),"ss?":o[i(412)]()},void 0===n?n=i(302):n===!![]&&(e=new Date((new Date)[i(505)]()).getTime(),n=i(e>=e&&e-e<864e5?501:282));for(var r in a)new RegExp("("+r+")").test(n)&&(n=n[i(303)](RegExp.$1,2==RegExp.$1[i(461)]?("0"+a[r])[i(274)](-2):a[r]));return n},isEmpty:function(t){var e=!![];for(var n in t){e=![];break}return e},isExist:function(t,e,n){n||(n="id");for(var a in t)if(e===t[a][n])return a;return![]},length:function(e,n){var a,i=t,o=0;if(n){var r,c=/<img\ssrc="\S+"\s?\/?>/g;(r=e[i(317)](c))&&(o=r[i(461)],e=e.replace(c,""))}a=e[i(272)]("");for(var s=0;s<a[i(461)];s++)a[s][i(487)](0)<299?o++:o+=2;return o},json2Url:function(e){var n=t,a="";for(var i in e)a+=i+"="+encodeURIComponent(e[i])+"&";return a[n(369)](0,-1)}},e[t(417)].component=function(t,e){var n=this;return e||(e=window),{editor:{props:{modelValue:{type:String,default:""},upload_img_url:{type:String,default:""},upload_file_url:{type:String,default:""},limit:{type:Number,default:200},focus:{type:Boolean,default:!![]}},data:function(){var t=_0x2689;return{content:this[t(290)],lock:![],component:"",focus:this.focus,chatlog:n[t(436)]==t(292)?!![]:![]}},watch:{modelValue:function(){var t=_0x2689;!this.lock&&(this[t(300)]=this[t(290)])}},methods:{send:function(){var t=_0x2689,e=this;if(""!==e[t(290)])if(n.util[t(461)](e[t(290)],!![])>e[t(396)])n[t(294)](t(366)+e[t(396)]+"字");else{var a,i=/<img\ssrc="(data:image\S+)"\s?\/?>/g;if(a=e.modelValue[t(317)](i))if(a[t(461)]>5)n[t(294)](t(397));else{var o=new FormData;a[t(420)](function(n,r){var c=t;a[r]=n.replace(i,"$1"),o.append(c(203),e[c(392)](a[r]))}),n[t(265)](e[t(421)],{type:t(337),data:o,success:function(i){var o=t;if(i[o(346)]){var r=e[o(290)];a[o(420)](function(t,e){r=r.replace(t,i.data[e])}),e[o(368)](o(248),r),e.$emit(o(438)),e[o(368)](o(248),""),e[o(277)].querySelector(o(479))[o(319)]=""}else n[o(294)](i[o(247)])}})}else this.$emit(t(438)),this.$emit(t(248),""),this[t(277)].querySelector(t(479)).innerHTML=""}this[t(311)]&&this[t(277)][t(305)](t(479))[t(311)]()},input:function(t){var e=_0x2689;this[e(368)]("update:modelValue",t[e(440)][e(319)])},click:function(){var t=_0x2689;this[t(249)]=e[t(332)]()[t(243)](0)},keyup:function(){var t=_0x2689;this.range=e[t(332)]()[t(243)](0)},blur:function(t){var e=_0x2689;this.lock=![],this[e(300)]=t[e(440)][e(319)]},inputWrap:function(t){var e=_0x2689;t[e(388)]?this.cursorInsert(e(206)):!t.shiftKey&&(t.preventDefault(),this[e(438)]())},cursorInsert:function(t){var n=_0x2689;if(e[n(332)]){var a,i,o=e[n(332)](),r=this.range,c=document[n(216)](n(342)),s=document[n(452)]();for(c[n(319)]=t,!this.range&&(this[n(277)].querySelector(n(479))[n(311)](),r=o[n(243)](0)),r[n(321)]();a=c.firstChild;)i=s[n(207)](a);r[n(481)](s),i&&((r=r[n(415)]())[n(205)](i),r[n(439)](!![]),o[n(296)](),o[n(257)](r)),this.range=o.getRangeAt(0)}else document[n(483)]&&document.selection[n(289)]()[n(447)](t);this[n(368)](n(248),this[n(277)].querySelector(n(479))[n(319)])},paste:function(t){var n=_0x2689,a=this;if(t[n(224)].files[0]&&e[n(356)]){var i=new FileReader;i[n(406)](t[n(224)][n(464)][0]),i[n(354)]=function(){var t=n;a[t(242)]('<img src="'+this[t(398)]+'" />')}}else a.$el.querySelector(n(259)).innerText=t[n(224)][n(482)](n(367)),a.cursorInsert(a[n(277)][n(305)](n(259)).innerText);t.stopPropagation(),t[n(324)]()},faceInsert:function(t){var e=_0x2689;this[e(242)](t),this[e(284)]()},face:function(t){var e=_0x2689;this[e(431)]=this[e(431)]?"":"xchat-face",t&&t[e(470)]()},uploadImage:function(t){var e=_0x2689,a=t[e(440)][e(202)],i=this;if(/\w+\.(jpg|png|gif|jpeg)$/[e(250)](a)){var o=new FormData;o[e(491)](e(499),t.target[e(464)][0]),n[e(265)](i[e(421)],{type:"POST",data:o,success:function(t){var a=e;t.code?(i.$emit(a(248),'<img src="'+t[a(326)]+a(270)),i[a(368)]("send"),i[a(368)](a(248),"")):n[a(294)](t[a(247)])}})}else n[e(294)]("格式不支持"),t[e(440)][e(202)]=""},uploadFile:function(t){var e=_0x2689,a=t[e(440)][e(202)],i=this;if($ext=["gif",e(426),e(223),e(430),"swf",e(434),e(232),e(525),e(425),e(204),e(349),e(403),e(320),e(459),"rm",e(285),e(380),e(416),"xls","xlsx",e(444),e(327),e(376),e(370),e(466),e(343),"gz",e(236)],$ext[e(352)](a.split(".").pop())<0)n.tip(e(514)),t[e(440)][e(202)]="";else{var o=new FormData;o[e(491)](e(499),t[e(440)].files[0]),n[e(265)](i[e(340)],{type:e(337),data:o,success:function(t){var a=e;t.code?(i[a(368)](a(248),'<a href="'+t.data[a(313)]+'" class="download" target="_blank">'+t[a(326)][a(372)]+a(494)),i.$emit(a(438)),i[a(368)]("update:modelValue","")):n.tip(t[a(247)])}})}},dataURItoBlob:function(t){var e,n=_0x2689;e=t[n(272)](",")[0][n(352)](n(280))>=0?atob(t[n(272)](",")[1]):unescape(t[n(272)](",")[1]);for(var a=t[n(272)](",")[0].split(":")[1][n(272)](";")[0],i=new Uint8Array(e[n(461)]),o=0;o<e[n(461)];o++)i[o]=e.charCodeAt(o);return new Blob([i],{type:a})}},template:'<div class="xchat-editor">\n                                <div class="xchat-editor-tool">\n                                    <span class="face" title="选择表情" @click="face"></span>\n                                    <span class="image" title="上传图片"><input type="file" name="file" @change="uploadImage" /></span>\n                                    <span class="file" title="发送文件"><input type="file" name="file" @change="uploadFile" /></span>\n                                    <span class="history" title="历史记录" v-if="chatlog" @click="$emit(\'chatlog\')">聊天记录</span>\n                                    <keep-alive><component :is="component" @faceClick="face" @faceInsert="faceInsert"></component></keep-alive>\n                                </div>\n                                <textarea class="filter"></textarea>\n                                <div class="xchat-editor-main">\n                                    <div class="content" contenteditable="true" v-html="content" ref="editor"\n                                        @keydown.enter="inputWrap"\n                                        @input="input"\n                                        @focus="lock=true"\n                                        @keyup="keyup"\n                                        @click="click"\n                                        @blur="blur"\n                                        @paste="paste">\n                                    </div>\n                                    <button class="btn" @click="send">提交</button>\n                                </div>\n                            </div>'},face:{data:function(){var t=_0x2689;return{face:[t(362),t(389),t(252),t(517),t(428),"[挖鼻]",t(278),t(385),"[挤眼]",t(378),t(455),t(458),"[泪]","[偷笑]",t(476),t(405),t(361),t(322),t(504),t(219),t(515),t(465),t(318),"[吐]",t(441),"[抱抱]",t(200),t(325),t(351),t(295),t(253),t(497),t(520),t(365),t(228),t(234),t(212),t(522),"[哼]",t(213),t(473),t(422),"[抓狂]","[黑线]",t(407),t(330),t(209),t(519),t(239),"[猪头]",t(477),t(297),t(310),t(353),t(364),t(432),"[赞]","[来]","[弱]",t(446),t(341),t(510),t(227),t(488),t(429),t(357),t(360),t(264),t(345),t(451),t(382),t(254)]}},activated:function(){var t=_0x2689;e[t(467)](t(414),this[t(418)])},deactivated:function(){var t=_0x2689;e.removeEventListener(t(414),this.faceClick)},methods:{insert:function(t){var e=_0x2689;this[e(368)](e(371),"a"==t[e(440)][e(516)][e(471)]()?t[e(440)][e(319)]:t[e(440)][e(450)])},faceClick:function(){var t=_0x2689;this.$emit(t(418))}},template:'<div class="xchat-face">\n                                <a href="javascript:;" @click="insert" v-for="(val, key) in face" :title="val">\n                                    <img :src="\'/static/chat/img/face/\'+ key +\'.gif\'" class="emoj" />\n                                </a>\n                            </div>'}}[t]},window.XChat=e}();